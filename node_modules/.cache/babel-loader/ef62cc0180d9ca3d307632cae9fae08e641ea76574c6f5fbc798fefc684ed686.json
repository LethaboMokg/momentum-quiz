{"ast":null,"code":"var _jsxFileName = \"/home/lethabo/Music/momentum-quiz/src/Pages/loginform.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { getAuth } from \"firebase/auth\";\nimport { RecaptchaVerifier } from \"firebase/auth\";\nimport { signInWithPhoneNumber } from \"firebase/auth\";\nimport { Navigate } from \"react-router-dom\";\nimport { getDatabase, ref, set } from \"firebase/database\";\nimport firebase from './firebase';\nimport './loginform.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet userData = {};\nfunction saveUserData() {\n  const uid = getAuth().currentUser.uid;\n  const db = getDatabase();\n  set(ref(db, `Users/${uid}/`), userData);\n}\nfunction GoToNext() {\n  _s();\n  const [goToHome, setGoToHome] = React.useState(false);\n  let formInfo = {};\n  if (goToHome) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 16\n    }, this);\n  }\n  function handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    formInfo[name] = value;\n\n    // this.setState(\n    //     {\n    //         [name]: value\n    //     }\n    // )\n  }\n\n  function configureCaptcha() {\n    window.recaptchaVerifier = new RecaptchaVerifier('sign-in-button', {\n      'size': 'invisible',\n      'callback': response => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        //this.onSignInSubmit();\n        console.log('Recaptcha varified');\n      },\n      defaultCountry: \"IN\"\n    }, getAuth());\n  }\n  function onSignInSubmit(e) {\n    e.preventDefault();\n    configureCaptcha();\n    // const phoneNumber = \"+27\" + this.state.mobile\n    const phoneNumber = \"+27\" + formInfo['mobile'];\n    userData[\"mobile\"] = phoneNumber;\n    userData[\"name\"] = formInfo['name'];\n    console.log(phoneNumber);\n    const appVerifier = window.recaptchaVerifier;\n    const auth = getAuth();\n    signInWithPhoneNumber(auth, phoneNumber, appVerifier).then(confirmationResult => {\n      // SMS sent. Prompt user to type the code from the message, then sign the\n      // user in with confirmationResult.confirm(code).\n      window.confirmationResult = confirmationResult;\n      console.log('OTP has been sent.');\n      // ...\n    }).catch(error => {\n      // Error; SMS not sent\n      // ...\n      console.log('SMS not sent');\n      console.log(error);\n    });\n  }\n  function onSubmitOTP(e) {\n    e.preventDefault();\n    console.log(formInfo['otp']);\n    setGoToHome(true);\n\n    // const code = this.state.otp\n    const code = formInfo['otp'];\n    console.log(code);\n    window.confirmationResult.confirm(code).then(result => {\n      // User signed in successfully.\n      const user = result.user;\n      if (user) {\n        saveUserData(user.uid);\n        console.log(JSON.stringify(user));\n        // alert('User is verified')\n        setGoToHome(true);\n      } else {\n        //\"error\"\n        console.log(\"Sorry! User doesn't exist\");\n      }\n\n      // ...\n    }).catch(error => {\n      // User couldn't sign in (bad verification code?)\n      // ...\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"topr\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/RSImage.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app_\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"title\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: onSignInSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"sign-in-button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"answer_\",\n            name: \"name\",\n            placeholder: \"Enter your name\",\n            required: true,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 129\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"answer_\",\n            name: \"mobile\",\n            placeholder: \"Mobile number\",\n            required: true,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"answered here-btn\",\n            type: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"title\",\n          children: \"Enter OTP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: onSubmitOTP,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"answer_\",\n            type: \"text\",\n            name: \"otp\",\n            placeholder: \"OTP Number\",\n            required: true,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"answered here-btn\",\n            type: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bottomr\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/logo.jpg\",\n        width: \"100px\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(GoToNext, \"ZoO/tQ/b5HlGLWd+PdcecvrlBJY=\");\n_c = GoToNext;\nexport default GoToNext;\nvar _c;\n$RefreshReg$(_c, \"GoToNext\");","map":{"version":3,"names":["React","getAuth","RecaptchaVerifier","signInWithPhoneNumber","Navigate","getDatabase","ref","set","firebase","userData","saveUserData","uid","currentUser","db","GoToNext","goToHome","setGoToHome","useState","formInfo","handleChange","e","name","value","target","configureCaptcha","window","recaptchaVerifier","response","console","log","defaultCountry","onSignInSubmit","preventDefault","phoneNumber","appVerifier","auth","then","confirmationResult","catch","error","onSubmitOTP","code","confirm","result","user","JSON","stringify"],"sources":["/home/lethabo/Music/momentum-quiz/src/Pages/loginform.js"],"sourcesContent":["import React from 'react'\nimport { getAuth } from \"firebase/auth\";\nimport { RecaptchaVerifier } from \"firebase/auth\";\nimport { signInWithPhoneNumber } from \"firebase/auth\";\nimport { Navigate} from \"react-router-dom\";\nimport { getDatabase, ref, set } from \"firebase/database\";\nimport firebase from './firebase'\nimport './loginform.css'\n\nlet userData = {}\n\nfunction saveUserData() {\n\tconst uid = getAuth().currentUser.uid;\n\tconst db = getDatabase()\n\n\n\tset(\n\t\tref(db, `Users/${uid}/`),\n\t\tuserData\n\t);\n\n}\n\nfunction GoToNext() {\n\n    \n    const [goToHome, setGoToHome] = React.useState(false);\n    let formInfo = {}\n\n\n\n    if(goToHome) {\n        return <Navigate to=\"/Home\" />;\n    }\n\n    function handleChange(e) {\n        const { name, value } = e.target\n\n        formInfo[name] = value;\n\n        // this.setState(\n        //     {\n        //         [name]: value\n        //     }\n        // )\n    }\n    function configureCaptcha() {\n        window.recaptchaVerifier = new RecaptchaVerifier('sign-in-button', {\n            'size': 'invisible',\n            'callback': (response) => {\n                // reCAPTCHA solved, allow signInWithPhoneNumber.\n                //this.onSignInSubmit();\n                console.log('Recaptcha varified')\n            },\n            defaultCountry: \"IN\"\n        }, getAuth());\n    }\n    function onSignInSubmit (e) {\n\n        e.preventDefault()\n\n        configureCaptcha()\n        // const phoneNumber = \"+27\" + this.state.mobile\n        const phoneNumber = \"+27\" + formInfo['mobile']\n\n        userData[\"mobile\"] = phoneNumber;\n        userData[\"name\"] = formInfo['name'];\n\n    \n\n        console.log(phoneNumber)\n        const appVerifier = window.recaptchaVerifier;\n        const auth = getAuth();\n        signInWithPhoneNumber(auth, phoneNumber, appVerifier)\n            .then((confirmationResult) => {\n                // SMS sent. Prompt user to type the code from the message, then sign the\n                // user in with confirmationResult.confirm(code).\n                window.confirmationResult = confirmationResult;\n                console.log('OTP has been sent.')\n                // ...\n            }).catch((error) => {\n                // Error; SMS not sent\n                // ...\n                console.log('SMS not sent')\n                console.log(error)\n            });\n    }\n    function onSubmitOTP (e){\n        (e).preventDefault()\n\n        console.log(formInfo['otp'])\n\n        setGoToHome(true);\n\n        // const code = this.state.otp\n        const code = formInfo['otp']\n        console.log(code)\n        window.confirmationResult.confirm(code)\n        .then((result) => {\n            // User signed in successfully.\n            const user = result.user;\n            if (user) {\n                saveUserData(user.uid);\n                console.log(JSON.stringify(user))\n                // alert('User is verified')\n                setGoToHome(true);\n            } else {\n                //\"error\"\n                console.log(\"Sorry! User doesn't exist\")\n            }\n            \n            // ...\n        }).catch((error) => {\n            // User couldn't sign in (bad verification code?)\n            // ...\n        });\n    }\n     \n    return (<>\n            <div className =\"topr\"><img src='/RSImage.png'></img></div>\n            <div className='app_'>\n                <div className='login'>\n                    <h2 className='title'>Login</h2>\n                    <form onSubmit={onSignInSubmit}>\n                        <div id='sign-in-button'></div>\n\n                        <input className='answer_' name='name' placeholder='Enter your name' required onChange={handleChange} /><br/>\n                        <input className='answer_' name='mobile' placeholder='Mobile number' required onChange={handleChange} />\n                        <button className=\"answered here-btn\" type='submit'>Submit</button>\n                    </form>\n\n\n                    <h2 className='title'>Enter OTP</h2>\n                    <form onSubmit={onSubmitOTP}>\n\n                        <input className='answer_' type='text' name='otp' placeholder='OTP Number' required onChange={handleChange} />\n                        <button className=\"answered here-btn\" type='submit' >Submit</button>\n                    </form>\n                </div>\n            </div>\n            <div className =\"bottomr\"><img src='/logo.jpg' width=\"100px\" alt=\"\"></img></div>\n        </>);\n    \n\n}\n\n\n\nexport default GoToNext"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}